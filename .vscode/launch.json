{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Server (.NET)",
      "type": "coreclr",
      "request": "launch",
      "program": "${workspaceFolder}/server/bin/Debug/net8.0/server.dll",
      "cwd": "${workspaceFolder}/server",
      "preLaunchTask": "build-server",
      "env": { "ASPNETCORE_ENVIRONMENT": "Development", "ASPNETCORE_URLS": "http://localhost:5000" },
      "serverReadyAction": { "action": "openExternally", "pattern": "Now listening on: (https?://\\S+)", "uriFormat": "%s/swagger" },
      "presentation": { "hidden": true }
    },
    {
      "name": "Client (Vite)",
      "type": "node-terminal",
      "request": "launch",
      "command": "npm run dev",
      "preLaunchTask": "wait-api",
      "cwd": "${workspaceFolder}/client",
      "presentation": { "hidden": true }
    },
    {
      "name": "Prod: Client + Server (Docker)",
      "type": "node-terminal",
      "request": "launch",
      "command": "bash",
      "args": ["-lc", "echo 'Containers (prod) are running. Press Enter to stop...' ; read"],
      "windows": { "command": "powershell", "args": ["-NoProfile","-Command","Write-Host 'Containers (prod) are running. Press Enter to stop...'; Read-Host"] },
      "preLaunchTask": "compose-up-prod",
      "postDebugTask": "compose-down"
    }
  ],
  "compounds": [
    { "name": "Dev: Client + Server", "configurations": ["Server (.NET)", "Client (Vite)"] }
  ]
}
